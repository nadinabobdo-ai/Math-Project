<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªØ­Ø¯ÙŠ Ø§Ù„Ø­Ù„ÙˆÙ‰ Ø§Ù„Ù…Ø³Ù…ÙˆÙ…Ø© - Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø£Ù†Ø«ÙˆÙŠØ©</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --p1-color: #a855f7;
            --p2-color: #ec4899;
        }

        body {
            font-family: 'Tajawal', sans-serif;
            background-color: #020617;
            color: white;
            overflow: hidden;
            margin: 0;
            height: 100vh;
            background: radial-gradient(circle at center, #1e1b4b 0%, #020617 100%);
        }

        .bg-glow {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: url('https://www.transparenttextures.com/patterns/carbon-fibre.png');
            opacity: 0.1;
            pointer-events: none;
        }

        /* Robot Styles */
        .robot-container {
            position: fixed;
            bottom: 40px;
            display: flex;
            flex-direction: column;
            align-items: center;
            transition: all 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
            z-index: 20;
        }
        #robot-p1 { left: 80px; }
        #robot-p2 { right: 80px; }

        .robot-body {
            width: 100px;
            height: 120px;
            border-radius: 40px 40px 20px 20px; /* Ø´ÙƒÙ„ Ø£ÙƒØ«Ø± Ø§Ù†Ø³ÙŠØ§Ø¨ÙŠØ© */
            position: relative;
            box-shadow: 0 10px 30px rgba(0,0,0,0.6);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            animation: idleRobot 3s infinite ease-in-out;
            border: 2px solid rgba(255,255,255,0.2);
        }

        @keyframes idleRobot {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-10px) rotate(2deg); }
        }

        /* Ø§Ù„ÙÙŠÙˆÙ†ÙƒØ© (Bow) */
        .bow {
            position: absolute;
            top: -15px;
            font-size: 24px;
            filter: drop-shadow(0 2px 5px rgba(0,0,0,0.5));
        }

        .robot-face {
            width: 75px;
            height: 45px;
            background: #0f172a;
            border-radius: 15px;
            display: flex;
            justify-content: space-around;
            align-items: center;
            border: 1px solid rgba(255,255,255,0.1);
            position: relative;
        }

        .eye-wrapper {
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* Ø§Ù„Ø±Ù…ÙˆØ´ */
        .lashes {
            position: absolute;
            top: -8px;
            font-size: 10px;
            color: white;
            opacity: 0.8;
        }

        .eye {
            width: 16px;
            height: 16px;
            background: #fff;
            border-radius: 50%;
            box-shadow: 0 0 15px #fff;
            transition: all 0.3s ease;
        }

        .eye.dead {
            background: transparent !important;
            box-shadow: none !important;
        }
        .eye.dead::before {
            content: 'Ã—';
            color: #ef4444;
            font-size: 24px;
            position: absolute;
            top: -5px; left: -2px;
        }

        .speech-bubble {
            background: rgba(255, 255, 255, 0.95);
            color: #1e293b;
            padding: 10px 18px;
            border-radius: 18px;
            margin-bottom: 15px;
            font-weight: 700;
            position: relative;
            opacity: 0;
            transform: scale(0.8);
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            font-size: 0.85rem;
            text-align: center;
        }

        .speech-bubble::after {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 50%;
            transform: translateX(-50%);
            border-left: 8px solid transparent;
            border-right: 8px solid transparent;
            border-top: 8px solid rgba(255, 255, 255, 0.95);
        }

        .active-robot .speech-bubble {
            opacity: 1;
            transform: scale(1);
        }

        .active-robot .robot-body {
            transform: scale(1.1);
            filter: brightness(1.15);
            border-color: #fff;
            box-shadow: 0 0 30px currentColor;
        }

        /* Candy Grid */
        .candy-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 15px;
            max-width: 550px;
            margin: 30px auto;
            position: relative;
            z-index: 15;
        }

        .candy-item {
            aspect-ratio: 1;
            background: rgba(30, 41, 59, 0.4);
            backdrop-filter: blur(8px);
            border: 2px solid rgba(255,255,255,0.1);
            border-radius: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 2.2rem;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .candy-item:hover {
            transform: translateY(-5px) scale(1.05);
            background: rgba(255, 255, 255, 0.1);
        }

        .glitch { animation: glitchAnim 0.1s infinite; }
        @keyframes glitchAnim {
            0% { transform: translate(0) rotate(1deg); }
            50% { transform: translate(-3px, 3px) rotate(-1deg); }
            100% { transform: translate(3px, -3px) rotate(1deg); }
        }

        #custom-alert {
            display: none;
            position: fixed;
            top: 20%; left: 50%; transform: translateX(-50%);
            background: #fff1f2;
            color: #be123c;
            padding: 15px 30px;
            border-radius: 20px;
            border: 2px solid #fb7185;
            font-weight: bold;
            z-index: 300;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            text-align: center;
            animation: slideDown 0.4s ease-out;
        }

        @keyframes slideDown {
            from { transform: translate(-50%, -100%); opacity: 0; }
            to { transform: translate(-50%, 0); opacity: 1; }
        }

        .reset-flash { animation: flash 0.5s; }
        @keyframes flash { 0% { opacity: 0.5; } 100% { opacity: 1; } }
    </style>
</head>
<body>

<div class="bg-glow"></div>
<div id="error-overlay" class="fixed inset-0 bg-red-500/10 hidden z-50 pointer-events-none"></div>
<div id="custom-alert">ÙŠØ§ Ø¥Ù„Ù‡ÙŠ! Ù„Ù‚Ø¯ Ø§Ø®ØªØ±ØªÙ…Ø§ Ù†ÙØ³ Ø§Ù„Ø­Ù„ÙˆÙ‰!<br>ÙŠØ¬Ø¨ Ø¹Ù„ÙŠÙƒÙ…Ø§ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªÙÙƒÙŠØ± Ù…Ù† Ø¬Ø¯ÙŠØ¯ Ø£ÙŠØªÙ‡Ø§ Ø§Ù„Ø°ÙƒÙŠØ§Øª. âœ¨</div>

<div class="p-6 text-center relative z-20">
    <h1 class="text-3xl font-bold bg-gradient-to-r from-purple-300 via-pink-300 to-purple-300 bg-clip-text text-transparent mb-1">ØªØ­Ø¯ÙŠ Ø§Ù„Ø·Ø§Ù„Ø¨Ø§Øª Ø§Ù„Ø°ÙƒÙŠØ§Øª</h1>
    <div class="inline-block px-4 py-1 bg-white/5 backdrop-blur-md rounded-full border border-white/10">
        <p id="game-msg" class="text-pink-300 font-bold text-xs">Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰: Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø³Ù…</p>
    </div>
</div>

<!-- Robot 1 (Purple - Girl) -->
<div id="robot-p1" class="robot-container active-robot" style="color: var(--p1-color);">
    <div class="speech-bubble" id="p1-bubble">Ø³Ø£Ø¶Ø¹ ÙØ®ÙŠ Ø£ÙˆÙ„Ø§Ù‹! âœ¨</div>
    <div class="robot-body bg-purple-600">
        <div class="bow">ğŸ€</div>
        <div class="robot-face">
            <div class="eye-wrapper">
                <div class="lashes">âœ¨</div>
                <div class="eye" id="p1-eye-l"></div>
            </div>
            <div class="eye-wrapper">
                <div class="lashes">âœ¨</div>
                <div class="eye" id="p1-eye-r"></div>
            </div>
        </div>
        <div class="mt-2 font-bold text-white text-[10px] uppercase">Lulu-Bot</div>
    </div>
</div>

<!-- Robot 2 (Pink - Girl) -->
<div id="robot-p2" class="robot-container" style="color: var(--p2-color);">
    <div class="speech-bubble" id="p2-bubble">Ø£Ù†Ø§ Ù…Ø³ØªØ¹Ø¯Ø© Ù„Ù„Ù…Ù†Ø§ÙØ³Ø©! ğŸ’…</div>
    <div class="robot-body bg-pink-500">
        <div class="bow">ğŸ€</div>
        <div class="robot-face">
            <div class="eye-wrapper">
                <div class="lashes">âœ¨</div>
                <div class="eye" id="p2-eye-l"></div>
            </div>
            <div class="eye-wrapper">
                <div class="lashes">âœ¨</div>
                <div class="eye" id="p2-eye-r"></div>
            </div>
        </div>
        <div class="mt-2 font-bold text-white text-[10px] uppercase">Mimi-Bot</div>
    </div>
</div>

<div id="candy-container" class="candy-grid"></div>

<!-- Modal -->
<div id="result-overlay" class="fixed inset-0 bg-slate-900/95 backdrop-blur-md flex items-center justify-center z-[200] hidden">
    <div class="text-center p-8 bg-white/10 border border-white/20 rounded-[2rem] shadow-2xl">
        <div class="text-5xl mb-4">ğŸ’”</div>
        <h2 class="text-3xl font-bold text-pink-400 mb-2">Ù„Ù„Ø£Ø³Ù ÙŠØ§ Ø¬Ù…ÙŠÙ„Ø©!</h2>
        <p id="result-desc" class="text-slate-200 mb-6 font-medium"></p>
        <button onclick="location.reload()" class="bg-gradient-to-r from-purple-500 to-pink-500 px-8 py-3 rounded-xl font-bold text-white transition-transform active:scale-95">
            Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© âœ¨
        </button>
    </div>
</div>

<script>
    const candies = ['ğŸ¬', 'ğŸ­', 'ğŸ§', 'ğŸ©', 'ğŸ«', 'ğŸª', 'ğŸ®', 'ğŸ°', 'ğŸ¡', 'ğŸ¦'];
    let p1Poison = -1, p2Poison = -1;
    let gameState = 'p1_setup'; 
    let currentPlayer = 1;

    const container = document.getElementById('candy-container');
    const msg = document.getElementById('game-msg');
    const customAlert = document.getElementById('custom-alert');
    
    function init() {
        container.innerHTML = '';
        candies.forEach((candy, i) => {
            const el = document.createElement('div');
            el.className = 'candy-item';
            el.innerHTML = candy;
            el.onclick = () => handleClick(i, el);
            container.appendChild(el);
        });
    }

    function resetToStart() {
        p1Poison = -1; p2Poison = -1;
        gameState = 'p1_setup'; currentPlayer = 1;
        document.body.classList.add('reset-flash');
        setTimeout(() => document.body.classList.remove('reset-flash'), 500);
        init();
        toggleRobot(1);
        msg.innerText = "Ø£Ø¹ÙŠØ¯ÙˆØ§ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©: Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø³Ù…";
        updateSpeech("Ø£ÙˆÙ‡! ØªÙØ§Ù‡Ù…Ù†Ø§ ÙƒØ¨ÙŠØ± Ø¬Ø¯Ø§Ù‹! ğŸ’–", "ÙÙ„Ù†Ø®ØªØ± Ø­Ù„ÙˆÙ‰ Ø£Ø®Ø±Ù‰ ÙŠØ§ ØµØ¯ÙŠÙ‚ØªÙŠ.");
    }

    function updateSpeech(p1Text, p2Text) {
        document.getElementById('p1-bubble').innerText = p1Text;
        document.getElementById('p2-bubble').innerText = p2Text;
    }

    function handleClick(index, el) {
        if (gameState === 'p1_setup') {
            p1Poison = index;
            el.style.borderColor = 'var(--p1-color)';
            msg.innerText = "Ø§Ù„Ù„Ø§Ø¹Ø¨Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰ Ø£ØªÙ…Øª Ø§Ù„Ù…Ù‡Ù…Ø©!";
            updateSpeech("Ù„Ù‚Ø¯ Ø£Ø®ÙÙŠØªÙ Ø³Ø±ÙŠ Ø¨Ù†Ø¬Ø§Ø­! ğŸ€", "Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø¢Ù† Ù„Ø£Ø¶Ø¹ Ù„Ù…Ø³ØªÙŠ!");
            setTimeout(() => {
                el.style.borderColor = 'rgba(255,255,255,0.1)';
                gameState = 'p2_setup'; currentPlayer = 2;
                toggleRobot(2);
            }, 800);
        } 
        else if (gameState === 'p2_setup') {
            if (index === p1Poison) {
                customAlert.style.display = 'block';
                setTimeout(() => { customAlert.style.display = 'none'; resetToStart(); }, 2500);
                return;
            }
            p2Poison = index;
            el.style.borderColor = 'var(--p2-color)';
            msg.innerText = "Ø§Ù„Ù„Ø§Ø¹Ø¨Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ© Ø£ØªÙ…Øª Ø§Ù„Ù…Ù‡Ù…Ø©!";
            updateSpeech("Ø§Ø³ØªØ¹Ø¯ÙŠ Ù„Ù„Ù…Ù†Ø§ÙØ³Ø© Ø§Ù„Ù‚ÙˆÙŠØ©!", "ØªÙ… ØªÙ„ØºÙŠÙ… Ø§Ù„Ø­Ù„ÙˆÙ‰ Ø£ÙŠØªÙ‡Ø§ Ø§Ù„Ø°ÙƒÙŠØ©!");
            setTimeout(() => {
                el.style.borderColor = 'rgba(255,255,255,0.1)';
                gameState = 'playing'; currentPlayer = 1;
                toggleRobot(1);
                msg.innerText = "ÙˆÙ‚Øª Ø§Ù„Ø¨Ø­Ø«: Ø§Ø­Ø°Ø±ÙŠ Ø§Ù„Ø³Ù…!";
                updateSpeech("Ø³Ø£ÙƒÙˆÙ† Ø­Ø°Ø±Ø© Ø¬Ø¯Ø§Ù‹.. ğŸ’…", "Ø£ØªÙ…Ù†Ù‰ Ù„ÙƒÙ Ø­Ø¸Ø§Ù‹ Ø³Ø¹ÙŠØ¯Ø§Ù‹!");
            }, 800);
        }
        else if (gameState === 'playing') {
            if (el.classList.contains('revealed')) return;
            el.classList.add('revealed');

            const hitP1Poison = (index === p1Poison);
            const hitP2Poison = (index === p2Poison);

            if (hitP1Poison || hitP2Poison) {
                let reason = "";
                if (currentPlayer === 1 && hitP1Poison) reason = "Ø£ÙˆÙ‡ Ø¹Ø²ÙŠØ²ØªÙŠ! Ù„Ù‚Ø¯ Ù†Ø³ÙŠØªÙ Ù…ÙƒØ§Ù† ÙØ®ÙƒÙ Ø§Ù„Ø®Ø§Øµ! ğŸ’”";
                else if (currentPlayer === 2 && hitP2Poison) reason = "Ù„Ù„Ø£Ø³Ù ÙŠØ§ Ø¬Ù…ÙŠÙ„Ø©! Ù„Ù‚Ø¯ Ø§Ø®ØªØ±ØªÙ Ø§Ù„Ø­Ù„ÙˆÙ‰ Ø§Ù„ØªÙŠ Ø³Ù…Ù…ØªÙÙ‡Ø§!";
                else reason = `Ù„Ù‚Ø¯ ÙƒØ´ÙØªÙƒÙ ØµØ¯ÙŠÙ‚ØªÙƒÙ Ø¨Ø°ÙƒØ§Ø¦Ù‡Ø§! Ø­Ø¸Ø§Ù‹ Ø£ÙˆÙØ± ÙÙŠ Ø§Ù„Ù…Ø±Ø© Ø§Ù„Ù‚Ø§Ø¯Ù…Ø©. âœ¨`;
                gameOver(currentPlayer, reason);
            } else {
                el.innerHTML = 'ğŸ’–';
                el.style.background = 'rgba(236, 72, 153, 0.1)';
                currentPlayer = currentPlayer === 1 ? 2 : 1;
                toggleRobot(currentPlayer);
                updateSpeech(
                    currentPlayer === 1 ? "Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø¢Ù† ÙŠØ§ Ø¨Ø·Ù„Ø©!" : "Ù„Ù‚Ø¯ Ù†Ø¬ÙˆØªÙ Ø¨Ø°ÙƒØ§Ø¡! âœ¨",
                    currentPlayer === 2 ? "Ø³Ø£ÙƒØ´Ù Ø§Ù„Ù‚Ø·Ø¹Ø© Ø§Ù„ØªØ§Ù„ÙŠØ©!" : "Ø£Ø¯Ø§Ø¡ÙŒ Ø±Ø§Ø¦Ø¹ Ø­Ù‚Ø§Ù‹!"
                );
            }
        }
    }

    function toggleRobot(id) {
        document.getElementById('robot-p1').classList.toggle('active-robot', id === 1);
        document.getElementById('robot-p2').classList.toggle('active-robot', id === 2);
    }

    function gameOver(id, reason) {
        const robot = document.getElementById(`robot-${id === 1 ? 'p1' : 'p2'}`);
        const eyeL = document.getElementById(`p${id}-eye-l`);
        const eyeR = document.getElementById(`p${id}-eye-r`);
        const bubble = document.getElementById(`p${id}-bubble`);
        robot.classList.add('glitch');
        eyeL.classList.add('dead'); eyeR.classList.add('dead');
        bubble.innerText = "ØªØ¹Ø·Ù„ Ø§Ù„Ù†Ø¸Ø§Ù…! ğŸ˜µ";
        setTimeout(() => {
            document.getElementById('result-desc').innerText = reason;
            document.getElementById('result-overlay').classList.remove('hidden');
        }, 1200);
    }

    init();
</script>

</body>
</html>